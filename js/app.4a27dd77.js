(function(e){function t(t){for(var s,n,i=t[0],u=t[1],l=t[2],m=0,d=[];m<i.length;m++)n=i[m],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&d.push(o[n][0]),o[n]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s]);c&&c(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],s=!0,i=1;i<r.length;i++){var u=r[i];0!==o[u]&&(s=!1)}s&&(a.splice(t--,1),e=n(n.s=r[0]))}return e}var s={},o={app:0},a=[];function n(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=s,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var c=u;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);var s=r("2b0e"),o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("div",{attrs:{id:"nav"}},[t("router-link",{attrs:{to:{name:"home"}}},[e._v("Home")]),e._v(" |  "),""!=e.$store.state.token?t("router-link",{attrs:{to:{name:"logout"}}},[e._v("Logout")]):e._e()],1),t("router-view")],1)},a=[],n=r("2877"),i={},u=Object(n["a"])(i,o,a,!1,null,null,null),l=u.exports,c=r("8c4f"),m=function(){var e=this;e._self._c;return e._m(0)},d=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("h1",[e._v("Home")]),t("p",[e._v("You must be authenticated to see this")])])}],p={name:"home"},g=p,h=Object(n["a"])(g,m,d,!1,null,null,null),f=h.exports,v=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center",attrs:{id:"login"}},[t("form",{staticClass:"form-signin",on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[t("h1",{staticClass:"h3 mb-3 font-weight-normal"},[e._v("Please Sign In")]),e.invalidCredentials?t("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v("Invalid username and password!")]):e._e(),this.$route.query.registration?t("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[e._v("Thank you for registering, please sign in.")]):e._e(),t("label",{staticClass:"sr-only",attrs:{for:"username"}},[e._v("Username")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"text",id:"username",placeholder:"Username",required:"",autofocus:""},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}}),t("label",{staticClass:"sr-only",attrs:{for:"password"}},[e._v("Password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"Password",required:""},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),t("router-link",{attrs:{to:{name:"register"}}},[e._v("Need an account?")]),t("button",{attrs:{type:"submit"}},[e._v("Sign in")])],1)])},w=[],b=r("bc3a"),_=r.n(b),y={login(e){return _.a.post("/login",e)},register(e){return _.a.post("/register",e)}},C={name:"login",components:{},data(){return{user:{username:"",password:""},invalidCredentials:!1}},methods:{login(){y.login(this.user).then(e=>{200==e.status&&(this.$store.commit("SET_AUTH_TOKEN",e.data.token),this.$store.commit("SET_USER",e.data.user),this.$router.push("/"))}).catch(e=>{const t=e.response;401===t.status&&(this.invalidCredentials=!0)})}}},P=C,O=Object(n["a"])(P,v,w,!1,null,null,null),S=O.exports,E=function(){var e=this,t=e._self._c;return t("h1",[e._v("Logout")])},x=[],k={created(){this.$store.commit("LOGOUT"),this.$router.push("/login")}},T=k,j=Object(n["a"])(T,E,x,!1,null,null,null),$=j.exports,q=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center",attrs:{id:"register"}},[t("form",{staticClass:"form-register",on:{submit:function(t){return t.preventDefault(),e.register.apply(null,arguments)}}},[t("h1",{staticClass:"h3 mb-3 font-weight-normal"},[e._v("Create Account")]),e.registrationErrors?t("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v(" "+e._s(e.registrationErrorMsg)+" ")]):e._e(),t("label",{staticClass:"sr-only",attrs:{for:"username"}},[e._v("Username")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"text",id:"username",placeholder:"Username",required:"",autofocus:""},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}}),t("label",{staticClass:"sr-only",attrs:{for:"password"}},[e._v("Password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"Password",required:""},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.confirmPassword,expression:"user.confirmPassword"}],staticClass:"form-control",attrs:{type:"password",id:"confirmPassword",placeholder:"Confirm Password",required:""},domProps:{value:e.user.confirmPassword},on:{input:function(t){t.target.composing||e.$set(e.user,"confirmPassword",t.target.value)}}}),t("router-link",{attrs:{to:{name:"login"}}},[e._v("Have an account?")]),t("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[e._v(" Create Account ")])],1)])},A=[],U={name:"register",data(){return{user:{username:"",password:"",confirmPassword:"",role:"user"},registrationErrors:!1,registrationErrorMsg:"There were problems registering this user."}},methods:{register(){this.user.password!=this.user.confirmPassword?(this.registrationErrors=!0,this.registrationErrorMsg="Password & Confirm Password do not match."):y.register(this.user).then(e=>{201==e.status&&this.$router.push({path:"/login",query:{registration:"success"}})}).catch(e=>{const t=e.response;this.registrationErrors=!0,400===t.status&&(this.registrationErrorMsg="Bad Request: Validation Errors")})},clearErrors(){this.registrationErrors=!1,this.registrationErrorMsg="There were problems registering this user."}}},N=U,M=Object(n["a"])(N,q,A,!1,null,null,null),I=M.exports,H=r("2f62");s["a"].use(H["a"]);const L=localStorage.getItem("token"),J=JSON.parse(localStorage.getItem("user"));null!=L&&(_.a.defaults.headers.common["Authorization"]="Bearer "+L);var R=new H["a"].Store({state:{token:L||"",user:J||{}},mutations:{SET_AUTH_TOKEN(e,t){e.token=t,localStorage.setItem("token",t),_.a.defaults.headers.common["Authorization"]="Bearer "+t},SET_USER(e,t){e.user=t,localStorage.setItem("user",JSON.stringify(t))},LOGOUT(e){localStorage.removeItem("token"),localStorage.removeItem("user"),e.token="",e.user={},_.a.defaults.headers.common={}}}});s["a"].use(c["a"]);const B=new c["a"]({mode:"history",base:"",routes:[{path:"/",name:"home",component:f,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:S,meta:{requiresAuth:!1}},{path:"/logout",name:"logout",component:$,meta:{requiresAuth:!1}},{path:"/register",name:"register",component:I,meta:{requiresAuth:!1}}]});B.beforeEach((e,t,r)=>{const s=e.matched.some(e=>e.meta.requiresAuth);s&&""===R.state.token?r("/login"):r()});var z=B;s["a"].config.productionTip=!1,_.a.defaults.baseURL="https://capstone-db-app.dev",new s["a"]({router:z,store:R,render:e=>e(l)}).$mount("#app")}});
//# sourceMappingURL=app.4a27dd77.js.map